from typing import Generic, TypeVar
from matplotlib import pyplot as plt
from ...core import *

_M1 = TypeVar("_M1", bound=Measure)
_D1 = TypeVar("_D1", bound=DataSet)


@dataclass(slots=True)
class Spring(Generic[_M1, _D1]):
    ms: list[_M1]
    Ts: list[_D1]


s = Spring(
    ms=[
        DataPoint(407.73, 0.01),
    ],
    Ts=[
        DataSet(data_points([
            4.501_928,
            4.503_106,
            4.498_552,
            4.475_027,
            4.492_895,
            4.495_591,
            4.498_514,
            4.493_122,
            4.489_318,
            4.491_165,
            4.489_896,
            4.491_066,
            4.482_730,
            4.494_691,
            4.491_309,
            4.489_549,
            4.491_736,
            4.491_067,
            4.492_727,
            4.491_919,
            4.494_726,
            4.494_487,
            4.493_574,
            4.493_305,
            4.493_798,
            4.492_725,
            4.492_539,
            4.491_982,
            4.492_224,
            4.492_004,
            4.494_397,
            4.493_252,
            4.492_772,
            4.491_609,
            4.492_419,
            4.492_780,
        ], 0.000_001)),
        DataSet(data_points([
            (7.557_981, 0.000_001),
            (7.563_277, 0.000_001),
            (7.561_076, 0.000_001),
            (7.561_799, 0.000_001),
            (7.563_355, 0.000_001),
            (7.562_514, 0.000_001),
            (7.563_027, 0.000_001),
            (7.563_114, 0.000_001),
            (7.562_394, 0.000_001),
            (7.561_827, 0.000_001),
            (7.563_035, 0.000_001),
            (7.562_654, 0.000_001),
            (7.562_264, 0.000_001),
            (7.562_281, 0.000_001),
            (7.562_097, 0.000_001),
            (7.562_149, 0.000_001),
            (7.562_541, 0.000_001),
            (7.562_407, 0.000_001),
            (7.562_244, 0.000_001),
            (7.562_315, 0.000_001),
            (7.561_859, 0.000_001),
            (7.563_193, 0.000_001),
            (7.562_485, 0.000_001),
            (7.563_347, 0.000_001),
        ])),
    ],
)

NormalDistribution.from_dataset(s.Ts[0], n=18).histogram()
plt.show()  # type: ignore
